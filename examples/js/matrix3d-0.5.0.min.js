/*
https://github.com/u-kudox/Matrix3D_for_EaselJS
License : public domain
*/
this.createjs=this.createjs||{},function(){"use strict";function a(a){this.rawData=new Float32Array(a&&16===a.length?a:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function b(a,b){var c=a.rawData,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],k=c[13],l=c[2],m=c[6],n=c[10],o=c[14],p=c[3],q=c[7],r=c[11],s=c[15],t=b.rawData,u=t[0],v=t[4],w=t[8],x=t[12],y=t[1],z=t[5],A=t[9],B=t[13],C=t[2],D=t[6],E=t[10],F=t[14],G=t[3],H=t[7],I=t[11],J=t[15],K=this.rawData;K[0]=d*u+e*y+f*C+g*G,K[1]=h*u+i*y+j*C+k*G,K[2]=l*u+m*y+n*C+o*G,K[3]=p*u+q*y+r*C+s*G,K[4]=d*v+e*z+f*D+g*H,K[5]=h*v+i*z+j*D+k*H,K[6]=l*v+m*z+n*D+o*H,K[7]=p*v+q*z+r*D+s*H,K[8]=d*w+e*A+f*E+g*I,K[9]=h*w+i*A+j*E+k*I,K[10]=l*w+m*A+n*E+o*I,K[11]=p*w+q*A+r*E+s*I,K[12]=d*x+e*B+f*F+g*J,K[13]=h*x+i*B+j*F+k*J,K[14]=l*x+m*B+n*F+o*J,K[15]=p*x+q*B+r*F+s*J}var c=a,d=a.prototype={get determinant(){var a=this.rawData,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=l*q-p*m,s=h*q-p*i,t=h*m-l*i,u=j*o-n*k,v=f*o-n*g,w=f*k-j*g,x=b*(g*r-k*s+o*t)-c*(f*r-j*s+n*t)+d*(i*u-m*v+q*w)-e*(h*u-l*v+p*w);return x},get position(){var a=this.rawData;return new createjs.Vector3D(a[12],a[13],a[14])},set position(a){var b=this.rawData;b[12]=a.x,b[13]=a.y,b[14]=a.z}};d.rawData=null,d.identity=function(){var a=this.rawData;a[0]=a[5]=a[10]=a[15]=1,a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},d.append=function(a){b.call(this,a,this)},d.prepend=function(a){b.call(this,this,a)},d.appendTranslation=function(b,c,d){this.append(new a([1,0,0,0,0,1,0,0,0,0,1,0,b,c,d,1]))},d.prependTranslation=function(b,c,d){this.prepend(new a([1,0,0,0,0,1,0,0,0,0,1,0,b,c,d,1]))},d.appendScale=function(b,c,d){this.append(new a([b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1]))},d.prependScale=function(b,c,d){this.prepend(new a([b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1]))},d.transformVector=function(a){var b=a.x,c=a.y,d=a.z,e=this.rawData,f=e[0]*b+e[4]*c+e[8]*d+e[12],g=e[1]*b+e[5]*c+e[9]*d+e[13],h=e[2]*b+e[6]*c+e[10]*d+e[14];return new createjs.Vector3D(f,g,h,1)},d.deltaTransformVector=function(a){var b=a.x,c=a.y,d=a.z,e=this.rawData,f=e[0]*b+e[4]*c+e[8]*d,g=e[1]*b+e[5]*c+e[9]*d,h=e[2]*b+e[6]*c+e[10]*d;return new createjs.Vector3D(f,g,h)},d.transformVectors=function(a,b){for(var c,d,e,f=this.rawData,g=f[0],h=f[4],i=f[8],j=f[12],k=f[1],l=f[5],m=f[9],n=f[13],o=f[2],p=f[6],q=f[10],r=f[14],s=0,t=a.length;t>s;s+=3){var u=s+1,v=s+2;c=a[s],d=a[u],e=a[v],b[s]=g*c+h*d+i*e+j,b[u]=k*c+l*d+m*e+n,b[v]=o*c+p*d+q*e+r}},d.copyFrom=function(a){for(var b=this.rawData,c=a.rawData,d=0;16>d;d++)b[d]=c[d]},d.copyToMatrix3D=function(a){for(var b=a.rawData,c=this.rawData,d=0;16>d;d++)b[d]=c[d]},d.copyColumnFrom=function(a,b){if(a=0|a,!(0>a||a>3)){var c=4*a,d=this.rawData;d[c]=b.x,d[++c]=b.y,d[++c]=b.z,d[++c]=b.w}},d.copyColumnTo=function(a,b){if(a=0|a,!(0>a||a>3)){var c=4*a,d=this.rawData;b.x=d[c],b.y=d[++c],b.z=d[++c],b.w=d[++c]}},d.copyRowFrom=function(a,b){if(a=0|a,!(0>a||a>3)){var c=this.rawData;c[a]=b.x,c[a+=4]=b.y,c[a+=4]=b.z,c[a+=4]=b.w}},d.copyRowTo=function(a,b){if(a=0|a,!(0>a||a>3)){var c=this.rawData;b.x=c[a],b.y=c[a+=4],b.z=c[a+=4],b.w=c[a+=4]}},d.copyRawDataFrom=function(a,b,c){b=0|b;var d=a.length;if(0>b||16>d-b)throw new Error("Invalid parameter");for(var e=this.rawData,f=0;16>f;f++)e[f]=a[b++];c&&this.transpose()},d.copyRawDataTo=function(a,b,c){if(b=0|b,0>b)throw new Error("Invalid parameter");var d;if(c){var e=this.clone();e.transpose(),d=e.rawData}else d=this.rawData;for(var f=0;16>f;f++)a[b++]=d[f]},d.transpose=function(){var a=this.rawData;this.rawData=new Float32Array([a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]])},d.invert=function(){var a=this.rawData,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=l*q-p*m,s=h*q-p*i,t=h*m-l*i,u=j*o-n*k,v=f*o-n*g,w=f*k-j*g,x=b*(g*r-k*s+o*t)-c*(f*r-j*s+n*t)+d*(i*u-m*v+q*w)-e*(h*u-l*v+p*w);if(0===x)return!1;var y=1/x,z=d*q-p*e,A=d*m-l*e,B=b*o-n*c,C=b*k-j*c,D=d*i-h*e,E=b*g-f*c;return a[0]=(g*r-k*s+o*t)*y,a[1]=(f*r-j*s+n*t)*-y,a[2]=(i*u-m*v+q*w)*y,a[3]=(h*u-l*v+p*w)*-y,a[4]=(c*r-k*z+o*A)*-y,a[5]=(b*r-j*z+n*A)*y,a[6]=(e*u-m*B+q*C)*-y,a[7]=(d*u-l*B+p*C)*y,a[8]=(c*s-g*z+o*D)*y,a[9]=(b*s-f*z+n*D)*-y,a[10]=(e*v-i*B+q*E)*y,a[11]=(d*v-h*B+p*E)*-y,a[12]=(c*t-g*A+k*D)*-y,a[13]=(b*t-f*A+j*D)*y,a[14]=(e*w-i*C+m*E)*-y,a[15]=(d*w-h*C+l*E)*y,!0},d.clone=function(){return new a(this.rawData)},d.toString=function(){return"[Matrix3D ["+Array.prototype.slice.call(this.rawData).toString()+"]]"},c.DEG_TO_RAD=Math.PI/180,createjs.Matrix3D=a}(window);