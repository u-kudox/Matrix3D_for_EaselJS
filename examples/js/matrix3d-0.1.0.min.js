/*
https://github.com/u-kudox/Matrix3D_for_EaselJS
License : public domain
*/
this.createjs=this.createjs||{},function(){"use strict";function a(a){a&&16===a.length?this.rawData=new Float32Array(a):this.identity()}function b(a,b){var c=a.rawData,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],k=c[13],l=c[2],m=c[6],n=c[10],o=c[14],p=c[3],q=c[7],r=c[11],s=c[15],t=b.rawData,u=t[0],v=t[4],w=t[8],x=t[12],y=t[1],z=t[5],A=t[9],B=t[13],C=t[2],D=t[6],E=t[10],F=t[14],G=t[3],H=t[7],I=t[11],J=t[15],K=this.rawData;K[0]=d*u+e*y+f*C+g*G,K[1]=h*u+i*y+j*C+k*G,K[2]=l*u+m*y+n*C+o*G,K[3]=p*u+q*y+r*C+s*G,K[4]=d*v+e*z+f*D+g*H,K[5]=h*v+i*z+j*D+k*H,K[6]=l*v+m*z+n*D+o*H,K[7]=p*v+q*z+r*D+s*H,K[8]=d*w+e*A+f*E+g*I,K[9]=h*w+i*A+j*E+k*I,K[10]=l*w+m*A+n*E+o*I,K[11]=p*w+q*A+r*E+s*I,K[12]=d*x+e*B+f*F+g*J,K[13]=h*x+i*B+j*F+k*J,K[14]=l*x+m*B+n*F+o*J,K[15]=p*x+q*B+r*F+s*J}var c=a.prototype={get determinant(){var a=this.rawData,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=l*q-p*m,s=h*q-p*i,t=h*m-l*i,u=j*o-n*k,v=f*o-n*g,w=f*k-j*g,x=b*(g*r-k*s+o*t)-c*(f*r-j*s+n*t)+d*(i*u-m*v+q*w)-e*(h*u-l*v+p*w);return x},get position(){var a=this.rawData;return new createjs.Vector3D(a[12],a[13],a[14])},set position(a){var b=this.rawData;b[12]=a.x,b[13]=a.y,b[14]=a.z}};c.rawData,c.identity=function(){this.rawData=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},c.append=function(a){b.call(this,a,this)},c.prepend=function(a){b.call(this,this,a)},c.appendTranslation=function(b,c,d){this.append(new a([1,0,0,0,0,1,0,0,0,0,1,0,b,c,d,1]))},c.prependTranslation=function(b,c,d){this.prepend(new a([1,0,0,0,0,1,0,0,0,0,1,0,b,c,d,1]))},c.appendScale=function(b,c,d){this.append(new a([b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1]))},c.prependScale=function(b,c,d){this.prepend(new a([b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1]))},c.transformVector=function(a){var b=a.x,c=a.y,d=a.z,e=this.rawData,f=e[0]*b+e[4]*c+e[8]*d+e[12],g=e[1]*b+e[5]*c+e[9]*d+e[13],h=e[2]*b+e[6]*c+e[10]*d+e[14];return new createjs.Vector3D(f,g,h,1)},c.deltaTransformVector=function(a){var b=a.x,c=a.y,d=a.z,e=this.rawData,f=e[0]*b+e[4]*c+e[8]*d,g=e[1]*b+e[5]*c+e[9]*d,h=e[2]*b+e[6]*c+e[10]*d;return new createjs.Vector3D(f,g,h)},c.transformVectors=function(a,b){for(var c,d,e,f=this.rawData,g=f[0],h=f[4],i=f[8],j=f[12],k=f[1],l=f[5],m=f[9],n=f[13],o=f[2],p=f[6],q=f[10],r=f[14],s=0,t=a.length;t>s;s+=3){var u=s+1,v=s+2;c=a[s],d=a[u],e=a[v],b[s]=g*c+h*d+i*e+j,b[u]=k*c+l*d+m*e+n,b[v]=o*c+p*d+q*e+r}},c.copyFrom=function(a){this.rawData=new Float32Array(a.rawData)},c.copyToMatrix3D=function(a){a.rawData=new Float32Array(this.rawData)},c.copyColumnFrom=function(a,b){if(a=0|a,!(0>a||a>3)){var c=4*a,d=this.rawData;d[c]=b.x,d[++c]=b.y,d[++c]=b.z,d[++c]=b.w}},c.copyColumnTo=function(a,b){if(a=0|a,!(0>a||a>3)){var c=4*a,d=this.rawData;b.x=d[c],b.y=d[++c],b.z=d[++c],b.w=d[++c]}},c.copyRowFrom=function(a,b){if(a=0|a,!(0>a||a>3)){var c=this.rawData;c[a]=b.x,c[a+=4]=b.y,c[a+=4]=b.z,c[a+=4]=b.w}},c.copyRowTo=function(a,b){if(a=0|a,!(0>a||a>3)){var c=this.rawData;b.x=c[a],b.y=c[a+=4],b.z=c[a+=4],b.w=c[a+=4]}},c.copyRawDataFrom=function(a,b,c){b=0|b;var d=a.length;if(0>b||16>d-b)throw new Error("Invalid parameter");for(var e=this.rawData,f=0;16>f;f++)e[f]=a[b++];c&&this.transpose()},c.copyRawDataTo=function(a,b,c){if(b=0|b,0>b)throw new Error("Invalid parameter");var d;if(c){var e=this.clone();e.transpose(),d=e.rawData}else d=this.rawData;for(var f=0;16>f;f++)a[b++]=d[f]},c.transpose=function(){var a=this.rawData;this.rawData=new Float32Array([a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]])},c.invert=function(){var a=this.rawData,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=l*q-p*m,s=h*q-p*i,t=h*m-l*i,u=j*o-n*k,v=f*o-n*g,w=f*k-j*g,x=b*(g*r-k*s+o*t)-c*(f*r-j*s+n*t)+d*(i*u-m*v+q*w)-e*(h*u-l*v+p*w);if(0===x)return!1;var y=1/x;a[0]=(g*m33m44+h*m*o+i*k*p-g*m*p-h*k*q-i*l*o)*y,a[1]=(f*m*p+h*j*q+i*l*n-f*m33m44-h*m*n-i*j*p)*y,a[2]=(f*k*q+g*m*n+i*j*o-f*m*o-g*j*q-i*k*n)*y,a[3]=(f*l*o+g*j*p+h*k*n-f*k*p-g*l*n-h*j*o)*y,a[4]=(c*m*p+d*k*q+e*l*o-c*m33m44-d*m*o-e*k*p)*y,a[5]=(b*m33m44+d*m*n+e*j*p-b*m*p-d*j*q-e*l*n)*y,a[6]=(b*m*o+c*j*q+e*k*n-b*k*q-c*m*n-e*j*o)*y,a[7]=(b*k*p+c*l*n+d*j*o-b*l*o-c*j*p-d*k*n)*y,a[8]=(c*h*q+d*i*o+e*g*p-c*i*p-d*g*q-e*h*o)*y,a[9]=(b*i*p+d*f*q+e*h*n-b*h*q-d*i*n-e*f*p)*y,a[10]=(b*g*q+c*i*n+e*f*o-b*i*o-c*f*q-e*g*n)*y,a[11]=(b*h*o+c*f*p+d*g*n-b*g*p-c*h*n-d*f*o)*y,a[12]=(c*i*l+d*g*m+e*h*k-c*h*m-d*i*k-e*g*l)*y,a[13]=(b*h*m+d*i*j+e*f*l-b*i*l-d*f*m-e*h*j)*y,a[14]=(b*i*k+c*f*m+e*g*j-b*g*m-c*i*j-e*f*k)*y,a[15]=(b*g*l+c*h*j+d*f*k-b*h*k-c*f*l-d*g*j)*y},c.clone=function(){return new a(this.rawData)},c.toString=function(){return"[Matrix3D ["+Array.prototype.slice.call(this.rawData).toString()+"]]"},createjs.Matrix3D=a}(window);